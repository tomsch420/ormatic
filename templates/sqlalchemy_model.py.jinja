# Generated by ORMatic

from __future__ import annotations
from sqlalchemy import Column, ForeignKey, Integer, String, Float, Boolean, DateTime, Enum, JSON
from sqlalchemy.orm import relationship, Mapped, mapped_column, DeclarativeBase
from typing_extensions import Optional, List, Type

{% for module in module_imports %}
import {{ module }}
{% endfor %}

{%- for module, classes in extra_imports.items() %}
from {{ module }} import {{ ", ".join(classes) }}
{%- endfor %}


from ormatic.dao import DataAccessObject
from ormatic.custom_types import TypeType

class Base(DeclarativeBase):
    type_mappings = {
    {% for key, value in type_annotation_map.items() %}
        {{ key }}: {{ value }},
    {% endfor %}
    }


{% for table in wrapped_tables %}
class {{ table.tablename }}({{ table.base_class_name }}, DataAccessObject[{{ table.clazz.__module__ }}.{{ table.clazz.__name__ }}]):
    __tablename__ = '{{ table.tablename }}'

    {{ table.primary_key_name }}: Mapped[int] = {{ table.primary_key }}

    {% for name, type in table.builtin_columns %}
    {{ name }}: {{ type }}
    {% endfor %}

    {% for name, type, constructor in table.custom_columns %}
    {{ name }}: {{ type }} = {{ constructor }}
    {% endfor %}

    {% for name, type, constructor in table.foreign_keys %}
    {{ name }}: {{ type }} = {{ constructor }}
    {% endfor %}

    {% for name, type, constructor in table.relationships %}
    {{ name }}: {{ type }} = {{ constructor }}
    {% endfor %}

    {% if table.mapper_args %}
    __mapper_args__ = {
    {% for key, value in table.mapper_args.items() %}
        {{ key }}: {{ value }},
    {% endfor %}
    }
    {% endif %}

{% endfor %}
